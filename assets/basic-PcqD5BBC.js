import{j as e,r as x,R as A,a as R}from"./client-DvaAtPIX.js";const O=({isAdmin:s,searchTerm:t,setSearchTerm:r,setIsAdmin:a,totalItemCount:n,cart:l})=>e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!s&&e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:t,onChange:o=>r(o.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a(!s),className:`px-3 py-1.5 text-sm rounded transition-colors ${s?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:s?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!s&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),l.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:n})]})]})]})})}),W=({item:s,products:t,calculateItemTotal:r,onRemove:a,onUpdateQuantity:n})=>{const l=r(s),o=s.product.price*s.quantity,d=l<o,c=d?Math.round((1-l/o)*100):0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:s.product.name}),e.jsx("button",{onClick:()=>a(s.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>n(t,s.product.id,s.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:s.quantity}),e.jsx("button",{onClick:()=>n(t,s.product.id,s.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[d&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",c,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(l).toLocaleString(),"원"]})]})]})]})},H=({coupons:s,selectedCoupon:t,onApplyCoupon:r,onClearCoupon:a})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),s.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:t?.code||"",onChange:n=>{const l=s.find(o=>o.code===n.target.value);l?r(l):a()},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),s.map(n=>e.jsxs("option",{value:n.code,children:[n.name," (",n.discountType==="amount"?`${n.discountValue.toLocaleString()}원`:`${n.discountValue}%`,")"]},n.code))]})]}),z=({totals:s,onCompleteOrder:t})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[s.totalBeforeDiscount.toLocaleString(),"원"]})]}),s.totalBeforeDiscount-s.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(s.totalBeforeDiscount-s.totalAfterDiscount).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[s.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:t,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[s.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]}),U=({products:s,cart:t,coupons:r,selectedCoupon:a,totals:n,applyCoupon:l,setSelectedCoupon:o,calculateItemTotal:d,removeFromCart:c,updateQuantity:i,addNotification:h,completeOrder:p})=>{const m=x.useCallback(()=>{p(()=>{o(null)})},[p,o]);return e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:t.map(y=>e.jsx(W,{item:y,products:s,calculateItemTotal:d,onRemove:c,onUpdateQuantity:i},y.product.id))})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(H,{coupons:r,selectedCoupon:a,onApplyCoupon:y=>l(y,n.totalBeforeDiscount),onClearCoupon:()=>o(null)}),e.jsx(z,{totals:n,onCompleteOrder:m})]})]})})},$=(s,t,r=!1)=>s<=0?"SOLD_OUT":r?`${t.toLocaleString()}원`:`₩${t.toLocaleString()}`,J=({product:s,remainingStock:t,onAddToCart:r})=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),s.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...s.discounts.map(a=>a.rate))*100,"%"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:$(t,s.price)}),s.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[s.discounts[0].quantity,"개 이상 구매시 할인 ",s.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[t<=5&&t>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",t,"개 남음"]}),t>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",t,"개"]})]}),e.jsx("button",{onClick:()=>r(s),disabled:t<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${t<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:t<=0?"품절":"장바구니 담기"})]})]}),Q=({products:s,filteredProducts:t,debouncedSearchTerm:r,getRemainingStock:a,addToCart:n})=>e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",s.length,"개 상품"]})]}),t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',r,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>e.jsx(J,{product:l,remainingStock:a(l),onAddToCart:n},l.id))})]})}),_=({products:s,cart:t,coupons:r,filteredProducts:a,debouncedSearchTerm:n,getRemainingStock:l,addToCart:o,calculateItemTotal:d,removeFromCart:c,updateQuantity:i,selectedCoupon:h,applyCoupon:p,setSelectedCoupon:m,totals:y,addNotification:b,completeOrder:f})=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(Q,{products:s,filteredProducts:a,debouncedSearchTerm:n,getRemainingStock:l,addToCart:o}),e.jsx(U,{products:s,cart:t,coupons:r,selectedCoupon:h,totals:y,applyCoupon:p,setSelectedCoupon:m,calculateItemTotal:d,removeFromCart:c,updateQuantity:i,addNotification:b,completeOrder:f})]}),G=({products:s,activeTab:t,formatPrice:r,getRemainingStock:a,startEditProduct:n,startAddProduct:l,deleteProduct:o,showProductForm:d,setShowProductForm:c,handleProductSubmit:i,productForm:h,setProductForm:p,editingProduct:m,setEditingProduct:y,handlePriceChange:b,handlePriceBlur:f,handleStockChange:N,handleStockBlur:g})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(a(u),u.price,!0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.stock>10?"bg-green-100 text-green-800":u.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[u.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:u.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>n(u),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>o(u.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},u.id))})]})}),d&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:h.name,onChange:u=>p({...h,name:u.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:h.description,onChange:u=>p({...h,description:u.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:h.price===0?"":h.price,onChange:u=>b(u.target.value),onBlur:u=>f(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:h.stock===0?"":h.stock,onChange:u=>N(u.target.value),onBlur:u=>g(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[h.discounts.map((u,j)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:u.quantity,onChange:v=>{const w=[...h.discounts];w[j].quantity=parseInt(v.target.value)||0,p({...h,discounts:w})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:u.rate*100,onChange:v=>{const w=[...h.discounts];w[j].rate=(parseInt(v.target.value)||0)/100,p({...h,discounts:w})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const v=h.discounts.filter((w,k)=>k!==j);p({...h,discounts:v})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},j)),e.jsx("button",{type:"button",onClick:()=>{p({...h,discounts:[...h.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{y(null),p({name:"",price:0,stock:0,description:"",discounts:[]}),c(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:m==="new"?"추가":"수정"})]})]})})]}),K=({coupons:s,deleteCoupon:t,showCouponForm:r,setShowCouponForm:a,handleCouponSubmit:n,couponForm:l,setCouponForm:o,handleDiscountValueChange:d,handleDiscountValueBlur:c})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.map(i=>e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:i.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:i.discountType==="amount"?`${i.discountValue.toLocaleString()}원 할인`:`${i.discountValue}% 할인`})})]}),e.jsx("button",{onClick:()=>t(i.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},i.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>a(!r),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),r&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:l.name,onChange:i=>o({...l,name:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:l.code,onChange:i=>o({...l,code:i.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:l.discountType,onChange:i=>o({...l,discountType:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:l.discountValue===0?"":l.discountValue,onChange:i=>d(i.target.value),onBlur:i=>c(i.target.value,l.discountType),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:l.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})]})]}),X=({activeTab:s,setActiveTab:t})=>e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>t("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>t("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),Y=(s,t)=>{if(s==="percentage"){if(t>100)return{isValid:!1,errorMessage:"할인율은 100%를 초과할 수 없습니다",correctedValue:100};if(t<0)return{isValid:!1,correctedValue:0}}else{if(t>1e5)return{isValid:!1,errorMessage:"할인 금액은 100,000원을 초과할 수 없습니다",correctedValue:1e5};if(t<0)return{isValid:!1,correctedValue:0}}return{isValid:!0}},Z=s=>s<0?{isValid:!1,errorMessage:"가격은 0보다 커야 합니다",correctedValue:0}:{isValid:!0},F=s=>s<0?{isValid:!1,errorMessage:"재고는 0보다 커야 합니다",correctedValue:0}:s>9999?{isValid:!1,errorMessage:"재고는 9999개를 초과할 수 없습니다",correctedValue:9999}:{isValid:!0},q=s=>s===""||/^\d+$/.test(s),ee=({addProduct:s,updateProduct:t,addNotification:r})=>{const[a,n]=x.useState(!1),[l,o]=x.useState(null),[d,c]=x.useState({name:"",price:0,stock:0,description:"",discounts:[]}),i=x.useCallback(()=>{c({name:"",price:0,stock:0,description:"",discounts:[]}),o(null),n(!1)},[]),h=x.useCallback(g=>{o(g.id),c({name:g.name,price:g.price,stock:g.stock,description:g.description||"",discounts:g.discounts||[]}),n(!0)},[]),p=x.useCallback(()=>{c({name:"",price:0,stock:0,description:"",discounts:[]}),o("new"),n(!0)},[]),m=x.useCallback(g=>{g.preventDefault(),l&&l!=="new"?t(l,d):s({...d,discounts:d.discounts}),i()},[l,d,s,t,i]),y=x.useCallback(g=>{q(g)&&c(u=>({...u,price:g===""?0:parseInt(g)}))},[]),b=x.useCallback(g=>{if(g==="")c(u=>({...u,price:0}));else{const u=parseInt(g),j=Z(u);!j.isValid&&j.correctedValue!==void 0&&(j.errorMessage&&r(j.errorMessage,"error"),c(v=>({...v,price:j.correctedValue})))}},[r]),f=x.useCallback(g=>{q(g)&&c(u=>({...u,stock:g===""?0:parseInt(g)}))},[]),N=x.useCallback(g=>{if(g==="")c(u=>({...u,stock:0}));else{const u=parseInt(g),j=F(u);!j.isValid&&j.correctedValue!==void 0&&(j.errorMessage&&r(j.errorMessage,"error"),c(v=>({...v,stock:j.correctedValue})))}},[r]);return{showProductForm:a,setShowProductForm:n,editingProduct:l,setEditingProduct:o,productForm:d,setProductForm:c,startEditProduct:h,startAddProduct:p,handleProductSubmit:m,handlePriceChange:y,handlePriceBlur:b,handleStockChange:f,handleStockBlur:N,resetForm:i}},se=({addCoupon:s,addNotification:t})=>{const[r,a]=x.useState(!1),[n,l]=x.useState({name:"",code:"",discountType:"amount",discountValue:0}),o=x.useCallback(()=>{l({name:"",code:"",discountType:"amount",discountValue:0}),a(!1)},[]),d=x.useCallback(()=>{o(),a(!0)},[o]),c=x.useCallback(p=>{p.preventDefault(),s(n),o()},[n,s,o]),i=x.useCallback(p=>{q(p)&&l(m=>({...m,discountValue:p===""?0:parseInt(p)}))},[]),h=x.useCallback((p,m)=>{const y=parseInt(p)||0,b=Y(m,y);!b.isValid&&b.correctedValue!==void 0&&(b.errorMessage&&t(b.errorMessage,"error"),l(f=>({...f,discountValue:b.correctedValue})))},[t]);return{showCouponForm:r,setShowCouponForm:a,couponForm:n,setCouponForm:l,startAddCoupon:d,handleCouponSubmit:c,handleDiscountValueChange:i,handleDiscountValueBlur:h,resetForm:o}},te=({products:s,coupons:t,getRemainingStock:r,deleteCoupon:a,activeTab:n,setActiveTab:l,deleteProduct:o,addNotification:d,addProduct:c,updateProduct:i,addCoupon:h})=>{const{showProductForm:p,setShowProductForm:m,editingProduct:y,setEditingProduct:b,productForm:f,setProductForm:N,startEditProduct:g,startAddProduct:u,handleProductSubmit:j,handlePriceChange:v,handlePriceBlur:w,handleStockChange:k,handleStockBlur:S}=ee({addProduct:c,updateProduct:i,addNotification:d}),{showCouponForm:M,setShowCouponForm:L,couponForm:C,setCouponForm:P,handleCouponSubmit:V,handleDiscountValueChange:T,handleDiscountValueBlur:D}=se({addCoupon:h,addNotification:d});return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx(X,{activeTab:n,setActiveTab:l}),n==="products"?e.jsx(G,{products:s,activeTab:n,formatPrice:$,getRemainingStock:r,startEditProduct:g,startAddProduct:u,deleteProduct:o,showProductForm:p,setShowProductForm:m,handleProductSubmit:j,productForm:f,setProductForm:N,editingProduct:y,setEditingProduct:b,addNotification:d,handlePriceChange:v,handlePriceBlur:w,handleStockChange:k,handleStockBlur:S}):e.jsx(K,{coupons:t,deleteCoupon:a,showCouponForm:M,setShowCouponForm:L,handleCouponSubmit:V,couponForm:C,setCouponForm:P,addNotification:d,handleDiscountValueChange:T,handleDiscountValueBlur:D})]})},re=({notifications:s,setNotifications:t})=>!s||s.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:s.map(r=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${r.type==="error"?"bg-red-600":r.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[e.jsx("span",{className:"mr-2",children:r.message}),e.jsx("button",{onClick:()=>t(a=>a.filter(n=>n.id!==r.id)),className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r.id))});function B(s,t){const[r,a]=x.useState(()=>{const l=localStorage.getItem(s);if(l)try{return JSON.parse(l)}catch{return t}return t}),n=l=>{a(l)};return x.useEffect(()=>{Array.isArray(r)&&r.length===0?localStorage.removeItem(s):localStorage.setItem(s,JSON.stringify(r))},[s,r]),[r,n]}const ne=(s,t)=>t.discountType==="amount"?Math.max(0,s-t.discountValue):Math.round(s*(1-t.discountValue/100)),ae=(s,t)=>s.discountType==="percentage"&&t<1e4?"percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.":null,le=(s,t)=>{const{discounts:r}=s.product,{quantity:a}=s,n=r.reduce((o,d)=>a>=d.quantity&&d.rate>o?d.rate:o,0);return t.some(o=>o.quantity>=10)?Math.min(n+.05,.5):n},E=(s,t)=>{const{price:r}=s.product,{quantity:a}=s,n=le(s,t);return Math.round(r*a*(1-n))},oe=(s,t)=>{let r=0,a=0;return s.forEach(n=>{const l=n.product.price*n.quantity;r+=l,a+=E(n,s)}),t&&(a=ne(a,t)),{totalBeforeDiscount:Math.round(r),totalAfterDiscount:Math.round(a)}},ce=(s,t,r)=>r<=0?s.filter(a=>a.product.id!==t):s.map(a=>a.product.id===t?{...a,quantity:r}:a),I=(s,t)=>{const r=t.find(n=>n.product.id===s.id);return s.stock-(r?.quantity||0)},ie=(s,t)=>{if(!t||t.trim()==="")return s;const r=t.toLowerCase();return s.filter(a=>{const n=a.name.toLowerCase().includes(r),l=a.description&&a.description.toLowerCase().includes(r);return n||l})},de=({addNotification:s})=>{const[t,r]=x.useState(0),[a,n]=B("cart",[]),l=m=>E(m,a),o=m=>oe(a,m),d=m=>I(m,a),c=x.useCallback(m=>{if(I(m,a)<=0){s("재고가 부족합니다!","error");return}n(b=>{const f=b.find(N=>N.product.id===m.id);if(f){const N=f.quantity+1;return N>m.stock?(s(`재고는 ${m.stock}개까지만 있습니다.`,"error"),b):b.map(g=>g.product.id===m.id?{...g,quantity:N}:g)}return[...b,{product:m,quantity:1}]}),s("장바구니에 담았습니다","success")},[a,s]),i=x.useCallback(m=>{n(y=>y.filter(b=>b.product.id!==m))},[]),h=x.useCallback((m,y,b)=>{const f=m.find(g=>g.id===y);if(!f)return;const N=f.stock;if(b>N){s(`재고는 ${N}개까지만 있습니다.`,"error");return}n(g=>ce(g,y,b))},[s]),p=x.useCallback(m=>{const y=`ORD-${Date.now()}`;s(`주문이 완료되었습니다. 주문번호: ${y}`,"success"),n([]),m&&m()},[s,n]);return x.useEffect(()=>{const m=a.reduce((y,b)=>y+b.quantity,0);r(m)},[a]),{cart:a,totalItemCount:t,addToCart:c,setCart:n,calculateCartTotal:o,calculateItemTotal:l,getRemainingStock:d,updateQuantity:h,removeFromCart:i,completeOrder:p}},ue=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],xe=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],me=({addNotification:s})=>{const[t,r]=B("coupons",xe),[a,n]=x.useState(null),l=x.useCallback(c=>{if(t.find(h=>h.code===c.code)){s("이미 존재하는 쿠폰 코드입니다.","error");return}r(h=>[...h,c]),s("쿠폰이 추가되었습니다.","success")},[t,s]),o=x.useCallback((c,i)=>{const h=ae(c,i);if(h){s(h,"error");return}n(c),s("쿠폰이 적용되었습니다.","success")},[s]),d=x.useCallback(c=>{r(i=>i.filter(h=>h.code!==c)),a?.code===c&&n(null),s("쿠폰이 삭제되었습니다.","success")},[a,s]);return{coupons:t,selectedCoupon:a,applyCoupon:o,setCoupons:r,setSelectedCoupon:n,addCoupon:l,deleteCoupon:d}},he=({addNotification:s})=>{const[t,r]=B("products",ue),a=x.useCallback(o=>{const d={...o,id:`p${Date.now()}`};r(c=>[...c,d]),s("상품이 추가되었습니다.","success")},[s]),n=x.useCallback((o,d)=>{r(c=>c.map(i=>i.id===o?{...i,...d}:i)),s("상품이 수정되었습니다.","success")},[s]),l=x.useCallback(o=>{r(d=>d.filter(c=>c.id!==o)),s("상품이 삭제되었습니다.","success")},[s]);return{products:t,setProducts:r,addProduct:a,updateProduct:n,deleteProduct:l}},ge=(s=3e3)=>{const[t,r]=x.useState([]),a=x.useCallback((n,l="success")=>{const o=Date.now().toString();r(d=>[...d,{id:o,message:n,type:l}]),setTimeout(()=>{r(d=>d.filter(c=>c.id!==o))},s)},[]);return{notifications:t,setNotifications:r,addNotification:a}};function pe(s,t){const[r,a]=x.useState(s);return x.useEffect(()=>{const n=setTimeout(()=>{a(s)},t);return()=>{clearTimeout(n)}},[s,t]),r}const be=()=>{const{notifications:s,setNotifications:t,addNotification:r}=ge(),{cart:a,totalItemCount:n,addToCart:l,calculateCartTotal:o,calculateItemTotal:d,getRemainingStock:c,removeFromCart:i,updateQuantity:h,completeOrder:p}=de({addNotification:r}),{products:m,addProduct:y,updateProduct:b,deleteProduct:f}=he({addNotification:r}),{coupons:N,selectedCoupon:g,applyCoupon:u,setSelectedCoupon:j,addCoupon:v,deleteCoupon:w}=me({addNotification:r}),[k,S]=x.useState(!1),[M,L]=x.useState("products"),[C,P]=x.useState(""),V=pe(C,500),T=o(g),D=ie(m,V);return e.jsxs("div",{className:"min-hx-screen bg-gray-50",children:[e.jsx(re,{notifications:s,setNotifications:t}),e.jsx(O,{isAdmin:k,searchTerm:C,setSearchTerm:P,setIsAdmin:S,totalItemCount:n,cart:a}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:k?e.jsx(te,{products:m,coupons:N,activeTab:M,getRemainingStock:c,setActiveTab:L,deleteCoupon:w,deleteProduct:f,addNotification:r,addProduct:y,updateProduct:b,addCoupon:v}):e.jsx(_,{products:m,coupons:N,cart:a,filteredProducts:D,debouncedSearchTerm:V,selectedCoupon:g,totals:T,getRemainingStock:c,addToCart:l,calculateItemTotal:d,removeFromCart:i,updateQuantity:h,applyCoupon:u,setSelectedCoupon:j,addNotification:r,completeOrder:p})})]})};A.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(be,{})}));
